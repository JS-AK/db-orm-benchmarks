# db-orm-benchmarks for **PostgreSQL 16.x**

!NB Prisma connection options for stable work: connection_limit=10 pool_timeout=60

### Select data by await Promise.all()
50_000 queries in await Promise.all() ("SELECT email FROM users WHERE users.id = $1") with random users.id

10 separately times

```
┌───────────────────┬───────────────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬───────────┐
│ orm db            │ avg query per sec |   1     │   2     │   3     │   4     │   5     │   6     │   7     │   8     │   9     │  10     │ avg       │
├───────────────────┼───────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼───────────┤
│ pg.pool           |  9393             |  5889ms |  5241ms |  5259ms |  5259ms |  5277ms |  5269ms |  5299ms |  5218ms |  5233ms |  5289ms |  5323.3ms |
│ drizzle-orm       |  8051             |  6250ms |  6156ms |  6156ms |  6250ms |  6286ms |  6210ms |  6242ms |  6239ms |  6173ms |  6141ms |  6210.3ms |
│ @js-ak/db-manager |  9066             |  5545ms |  5521ms |  5532ms |  5475ms |  5488ms |  5502ms |  5551ms |  5531ms |  5494ms |  5512ms |  5515.1ms |
│ @prisma/client    | 16089             |  3094ms |  3126ms |  3119ms |  3146ms |  3098ms |  3114ms |  3082ms |  3100ms |  3097ms |  3102ms |  3107.8ms |
│ sequelize         |  7855             |  6345ms |  6332ms |  6370ms |  6352ms |  6377ms |  6371ms |  6385ms |  6400ms |  6359ms |  6360ms |  6365.1ms |
│ typeorm           |  7466             |  6674ms |  6680ms |  6736ms |  6649ms |  6705ms |  6633ms |  6633ms |  6665ms |  6639ms |  6952ms |  6696.6ms |
│ mikro-orm         |  6601             |  7597ms |  7541ms |  7621ms |  7551ms |  7529ms |  7594ms |  7454ms |  7597ms |  7689ms |  7574ms |  7574.7ms |
│ objection.js      |  7128             |  7058ms |  7012ms |  7041ms |  6945ms |  7029ms |  6903ms |  7079ms |  6994ms |  7008ms |  7074ms |  7014.3ms |
│ kysely            |  8753             |  5729ms |  5690ms |  5710ms |  5710ms |  5737ms |  5710ms |  5764ms |  5653ms |  5705ms |  5718ms |  5712.6ms |
└───────────────────┴───────────────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴───────────┘
```

### Select data by await one by one in for loop
50_000 queries in await one by one in for loop ("SELECT email FROM users WHERE users.id = $1") with random users.id

10 separately times

```
┌───────────────────┬───────────────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬───────────┐
│ orm db            │ avg query per sec |   1     │   2     │   3     │   4     │   5     │   6     │   7     │   8     │   9     │  10     │ avg       │
├───────────────────┼───────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼───────────┤
│ pg.pool           | 10495             |  4579ms |  4372ms |  4318ms |  4830ms |  4806ms |  4579ms |  4863ms |  4584ms |  5257ms |  5456ms |  4764.4ms |
│ drizzle-orm       |  8318             |  6200ms |  5399ms |  5921ms |  6162ms |  6409ms |  5940ms |  5985ms |  5914ms |  6080ms |  6098ms |  6010.8ms |
│ @js-ak/db-manager |  9907             |  5569ms |  5336ms |  4948ms |  4958ms |  4885ms |  4929ms |  4982ms |  4920ms |  4964ms |  4979ms |  5047.0ms |
│ @prisma/client    |  3132             | 16300ms | 15570ms | 15773ms | 16001ms | 15687ms | 16126ms | 15461ms | 16248ms | 16088ms | 16393ms | 15964.7ms |
│ sequelize         |  6506             |  7533ms |  7344ms |  7304ms |  7594ms |  8112ms |  7889ms |  7708ms |  7722ms |  7728ms |  7920ms |  7685.4ms |
│ typeorm           |  6282             |  7961ms |  7875ms |  7664ms |  7829ms |  7658ms |  8445ms |  8015ms |  8297ms |  7916ms |  7932ms |  7959.2ms |
│ mikro-orm         |  5143             |  9883ms |  9771ms |  9614ms |  9690ms |  9744ms |  9753ms |  9646ms |  9668ms |  9728ms |  9722ms |  9721.9ms |
│ objection.js      |  7633             |  6237ms |  6348ms |  7223ms |  6625ms |  6601ms |  7333ms |  6571ms |  6101ms |  6174ms |  6288ms |  6550.1ms |
│ kysely            | 10021             |  5106ms |  4955ms |  5017ms |  5015ms |  5012ms |  4963ms |  4939ms |  4868ms |  4985ms |  5035ms |  4989.5ms |
└───────────────────┴───────────────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴───────────┘
```

### Insert data in one transaction
50_000 users

10 separately times

```
┌───────────────────┬───────────────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬───────────┐
│ orm db            │ avg query per sec |   1     │   2     │   3     │   4     │   5     │   6     │   7     │   8     │   9     │  10     │ avg       │
├───────────────────┼───────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼───────────┤
│ pg.pool           |  6227             |  7743ms | 10025ms |  8416ms |  8822ms |  8042ms |  7557ms |  7853ms |  7375ms |  7131ms |  7333ms |  8029.7ms |
│ drizzle-orm       |  4789             |  9725ms | 10256ms | 10059ms | 10477ms | 10404ms | 11051ms | 10929ms | 10056ms | 11469ms |  9981ms | 10440.7ms |
│ @js-ak/db-manager |  6244             |  8139ms |  7781ms |  7714ms |  7718ms |  8311ms |  7377ms |  8345ms |  8320ms |  8029ms |  8349ms |  8008.3ms |
│ @prisma/client    |  2063             | 23247ms | 23765ms | 22123ms | 26757ms | 24464ms | 23579ms | 24779ms | 25214ms | 23890ms | 24554ms | 24237.2ms |
│ sequelize         |  3174             | 15799ms | 15862ms | 15459ms | 15216ms | 15962ms | 15816ms | 15394ms | 15549ms | 16618ms | 15845ms | 15752.0ms |
│ typeorm           |  4646             | 11063ms | 11009ms | 10400ms | 10596ms |  9872ms | 10310ms | 11114ms | 11243ms | 10951ms | 11063ms | 10762.1ms |
└───────────────────┴───────────────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴───────────┘
```

### Insert data by await Promise.all()
50_000 users

10 separately times

```
┌───────────────────┬───────────────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬───────────┐
│ orm db            │ avg query per sec |   1     │   2     │   3     │   4     │   5     │   6     │   7     │   8     │   9     │  10     │ avg       │
├───────────────────┼───────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼───────────┤
│ pg.pool           |  8067             |  7401ms |  5809ms |  5786ms |  5837ms |  6361ms |  6253ms |  6102ms |  6080ms |  6280ms |  6069ms |  6197.8ms |
│ drizzle-orm       |  3154             | 19503ms | 15193ms | 15592ms | 14310ms | 15659ms | 16083ms | 15051ms | 16887ms | 16213ms | 14059ms | 15855.0ms |
│ @js-ak/db-manager |  7509             |  8569ms |  6307ms |  6367ms |  6480ms |  6349ms |  6328ms |  6246ms |  6571ms |  6205ms |  7166ms |  6658.8ms |
│ @prisma/client    |  9050             |  9707ms |  5426ms |  5285ms |  5031ms |  4923ms |  4957ms |  4924ms |  5022ms |  5017ms |  4958ms |  5525.0ms |
│ sequelize         |  4782             | 12864ms | 10123ms | 10207ms | 10040ms | 10017ms | 10178ms | 10097ms | 10363ms | 10663ms | 10005ms | 10455.7ms |
│ typeorm           |  4781             | 11754ms | 10467ms | 10209ms | 10479ms | 10126ms | 10244ms | 10347ms | 10162ms | 10302ms | 10494ms | 10458.4ms |
└───────────────────┴───────────────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴───────────┘
```
